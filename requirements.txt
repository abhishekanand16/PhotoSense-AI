# FastAPI and server
fastapi>=0.128.0
uvicorn[standard]>=0.40.0
pydantic>=2.12.5
aiohttp>=3.13.3

# Computer Vision
# NOTE: NumPy 2.x is currently incompatible with faiss-cpu and ultralytics wheels.
numpy>=1.26.4,<2
opencv-python>=4.11.0.86,<4.12
pillow>=12.1.0

# Face detection & embeddings (ONNX, no TensorFlow)
insightface>=0.7.3
onnxruntime>=1.23.2
# NOTE: On Python 3.13+, ml_dtypes 0.5+ requires numpy>=2.1 which conflicts with faiss/ultralytics.
# We let pip resolve ml_dtypes/onnx transitively (accepts 0.4.x on Py3.13 with numpy<2).
# For best compatibility, use Python 3.11 or 3.12.

# Object detection
ultralytics>=8.4.0

# Image embeddings (CLIP) + Florence-2
transformers>=4.57.3,<5
torch>=2.3.0
torchvision>=0.18.0
timm>=1.0.24
einops>=0.8.1

# Vector search
faiss-cpu>=1.13.2

# Clustering
scikit-learn>=1.8.0
# Optional: hdbscan (better than DBSCAN for face clustering)
# pip install hdbscan